<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªì S∆° C·ªßa T√¥i</title>
    <!-- Link Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
               /* Navbar Top Section */
         .navbar-top {
             background-color: #ff5722; /* M√†u n·ªÅn cam */
             color: white;
             padding: 10px 0;
             font-size: 14px;
         }

         .navbar-top .container {
             display: flex;
             justify-content: space-between;
             align-items: center;
         }
         .navbar-top a {
             color: white;
             text-decoration: none;
             margin-right: 15px;
         }

         .navbar-top a:hover {
             text-decoration: underline;
         }

         /* Main Navbar Section */
         .navbar-main {
             background-color: #ff5722; /* M√†u n·ªÅn cam */
             padding: 15px 0;

         }

         .navbar-main .container {
             display: flex;
             justify-content: space-between;
             align-items: center;
         }

         .navbar-main .logo img {
             height: 40px;
         }

         .navbar-main .search-bar {
             flex: 1;
             margin: 0 20px;
             display: flex;
             align-items: center;
         }

         .navbar-main .search-bar input {
             flex: 1;
             padding: 10px;
             border: none;
             border-radius: 5px 0 0 5px;
             font-size: 14px;
         }

         .navbar-main .search-bar button {
             padding: 10px 20px;
             background-color: white;
             color: #ff5722;
             border: none;
             border-radius: 0 5px 5px 0;
             cursor: pointer;
         }

         .navbar-main .cart-icon {
             display: flex;
             align-items: center;
             color: white;
             font-size: 18px;
         }

         .navbar-main .cart-icon .cart-count {
             background-color: white;
             color: #ff5722;
             border-radius: 50%;
             padding: 5px 10px;
             font-size: 14px;
             margin-left: 5px;
         }

         /* Submenu Below Search Bar */
         .navbar-submenu {
             background-color: #ff814c;
             padding: 5px 0;
             font-size: 14px;
         }

         .navbar-submenu a {
             color: white;
             text-decoration: none;
             margin-right: 15px;
         }

         .navbar-submenu a:hover {
             text-decoration: underline;
         }
         <!--        test-->
.navbar {
            display: flex; /* CƒÉn ngang */
            justify-content: flex-end; /* ƒê·∫©y to√†n b·ªô m·ª•c sang b√™n ph·∫£i */
            align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            background-color: #ff6600; /* M√†u n·ªÅn */
            padding: 10px 20px;
            gap: 15px; /* Kho·∫£ng c√°ch gi·ªØa c√°c m·ª•c */
        }

        .navbar a, .navbar .dropdown {
            text-decoration: none;
            color: white; /* M√†u ch·ªØ */
            font-size: 14px;
            font-weight: 500;
        }

        .auth-links {
            margin-left: auto; /* ƒê·∫©y m·ª•c ƒëƒÉng nh·∫≠p/ƒëƒÉng k√Ω ho·∫∑c dropdown ra cu·ªëi */
        }

        .dropdown-menu {
            position: absolute;
            top: 100%; /* Hi·ªÉn th·ªã dropdown ngay d∆∞·ªõi n√∫t */
            right: 0;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: none; /* ·∫®n menu th·∫£ xu·ªëng m·∫∑c ƒë·ªãnh */
        }

        .dropdown:hover .dropdown-menu {
            display: block; /* Hi·ªÉn th·ªã menu khi hover */
        }

        .dropdown-menu a {
            color: #333; /* M√†u ch·ªØ c·ªßa menu */
            padding: 10px;
            display: block;
            text-decoration: none;
        }

        .dropdown-menu a:hover {
            background-color: #f5f5f5;
        }
<!--       test -->
<!--         navbar-->
        .address-select-container {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-bottom: 20px;
    }

    .address-select {
    flex: 1;
    appearance: none;
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 0.375rem;
    padding: 0.625rem;
    font-size: 1rem;
    color: #495057;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath d='M1 4l5 5 5-5z' fill='%23495057'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 8px 8px;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    .address-select:focus {
    border-color: #ff5722;
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(255, 87, 34, 0.25);
    }


        .profile-container {
            max-width: 800px;
            margin: 30px auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 30px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 20px;
            flex-direction: column;
            text-align: center;
        }

        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 20px;
            border: 2px solid #ddd;
        }

        .btn-choose {
            display: inline-block;
            background-color: #ff5722;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            cursor: pointer;
            border: none;
        }

        .btn-choose:hover {
            background-color: #ff7043;
        }

        .profile-info {
            text-align: center;
        }
        textarea.form-control {
    appearance: none;
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 0.375rem;
    padding: 0.625rem;
    font-size: 1rem;
    color: #495057;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    textarea.form-control:focus {
    border-color: #ff5722;
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(255, 87, 34, 0.25);
    }

        .profile-form .form-group {
            margin-bottom: 20px;
        }

        .btn-update {
            background-color: #ff5722;
            border-color: #ff5722;
        }

        .btn-update:hover {
            background-color: #ff7043;
            border-color: #ff7043;
        }
    </style>
</head>
<body>
<!-- Navbar -->
<div class="navbar-top">
    <div class="container">
        <div>
            <a href="#">K√™nh Ng∆∞·ªùi B√°n</a>
            <a href="#">T·∫£i ·ª©ng d·ª•ng</a>
            <span>K·∫øt n·ªëi:</span>
            <a href="#"><i class="bi bi-facebook"></i></a>
            <a href="#"><i class="bi bi-instagram"></i></a>
        </div>
        <div class="navbar">
            <a href="#">Th√¥ng B√°o</a>
            <a href="#">H·ªó Tr·ª£</a>
            <a href="#">Ti·∫øng Vi·ªát</a>

            <span class="auth-links" th:unless="${user}">
            <a th:href="@{/register}" id="register">ƒêƒÉng K√Ω</a> |
            <a th:href="@{/login}" id="login">ƒêƒÉng Nh·∫≠p</a>
        </span>

            <div class="dropdown auth-links" th:if="${user}">
                <a href="#" class="dropdown-toggle" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" th:text="${user.getFullName}">
                    qunha353
                </a>
                <ul class="dropdown-menu" aria-labelledby="userDropdown">
                    <li><a class="dropdown-item text-dark" th:href="@{/customer/profile}">T√†i Kho·∫£n C·ªßa T√¥i</a></li>
                    <li><a class="dropdown-item text-dark" th:href="@{/customer/orders}">ƒê∆°n Mua</a></li>
                    <li><a class="dropdown-item text-danger" th:href="@{/logout}">ƒêƒÉng Xu·∫•t</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- Main Navbar -->
<div class="navbar-main">
    <div class="container">
        <div class="logo">
            <a th:href="@{/}"> <img src="shopee-logo.png" alt="Shopee Logo"></a>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="T√¨m s·∫£n ph·∫©m, th∆∞∆°ng hi·ªáu v√† t√™n shop">
            <button>üîç</button>
        </div>
        <div class="cart-icon">
            <a th:href="@{/customer/cart}">
                üõí
            </a>
            <div class="cart-count"></div>
        </div>
    </div>
</div>
<!-- Banner Section -->


<!-- Profile Container -->
<div class="container">
    <div class="profile-container">
        <div class="profile-header">
            <form style="display:block;" method="post" enctype="multipart/form-data" th:action=@{/customer/profile/save-image}>
                <img id="avatarPreview"
                     th:src="${user.image} != null ? ${user.image} : '/images/users/default-avatar.jpg'"
                     alt="·∫¢nh ƒê·∫°i Di·ªán"
                     class="profile-avatar"
                     style="max-width: 150px; height: 150px; object-fit: cover; border-radius: 50%;">

                <div style="display:block;">
                    <input type="file"
                           id="avatarInput"
                           name="avatar"
                           style="display: none;"
                           accept="image/jpeg,image/png,image/gif"
                           data-max-size="5242880">

                    <!-- N√∫t ch·ªçn ·∫£nh -->
                    <button type="button" class="btn-choose" onclick="document.getElementById('avatarInput').click();">
                        Ch·ªçn ·∫¢nh
                    </button>

                    <!-- N√∫t L∆∞u -->
                    <button type="submit" style="width: 120px;
    height: 48px;
    border-radius: 5px;
    background-color: #FF5722;
    color: #ffffff;
    border-color: #FFFFFF;
    margin-left: 20px;">
                        L∆∞u ·∫¢nh
                    </button>
                </div>
            </form>

            <script>
                const avatarInput = document.getElementById('avatarInput');
                const avatarPreview = document.getElementById('avatarPreview');

                // Hi·ªÉn th·ªã ·∫£nh xem tr∆∞·ªõc khi ng∆∞·ªùi d√πng ch·ªçn ·∫£nh
                avatarInput.addEventListener('change', function () {
                    const file = this.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            avatarPreview.src = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                });
            </script>

            <!-- Th√¥ng b√°o l·ªói -->
            <div id="uploadError" style="color: red; margin-top: 10px;"></div>
        </div>


        <div class="profile-info">
            <h2 th:text="${user.getFullName()}">T√™n Ng∆∞·ªùi D√πng</h2>
            <p><strong>T√™n ƒêƒÉng Nh·∫≠p:</strong> <span th:text="${user.username}">username</span></p>
        </div>

        <form id="form" th:action=@{/customer/profile/save-information} th:object="${user}" method="post" class="profile-form">
            <input type="hidden" th:value="${user.userID}" name="userID">

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="fullName" class="form-label">H·ªç v√† T√™n</label>
                    <input type="text" class="form-control" id="fullName" name="full_name"
                           th:value="${user.getFullName()}" required>
                </div>
                <div class="col-md-6 form-group">
                    <label for="username" class="form-label">T√™n ƒêƒÉng Nh·∫≠p</label>
                    <input type="text" class="form-control" id="username" name="username" th:value="${user.username}"
                           readonly>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="email" class="form-label">ƒê·ªãa Ch·ªâ Email</label>
                    <input type="email" class="form-control" id="email" name="email" th:value="${user.email}" readonly>
                </div>
                <div class="col-md-6 form-group">
                    <label for="phone_number" class="form-label">S·ªë ƒêi·ªán Tho·∫°i</label>
                    <input type="tel" class="form-control" id="phone_number" name="phone_number"
                           th:value="${user.phoneNumber}" required>
                </div>
            </div>
            <script src="https://esgoo.net/scripts/jquery.js"></script>

            <div style="display:flex; gap:30px ;">
                <!--                &lt;!&ndash; T·ªânh Th√†nh &ndash;&gt;-->
                <!--                <select class="address-select" id="tinh" name="tinh" title="Ch·ªçn T·ªânh Th√†nh">-->
                <!--                    <option value="0" th:text="${address != null && address.size() > 0 ? address[0] : 'T·ªânh Th√†nh'}">-->
                <!--                        T·ªânh Th√†nh-->
                <!--                    </option>-->
                <!--                </select>-->
                <div style="margin-bottom: 10px;">
                    <label style="margin-bottom:5px;">T·ªânh/Th√†nh Ph·ªë</label>

                    <input th:value="${address != null && address.size() > 0 ? address[0] : 'T·ªânh Th√†nh'}"
                           id="tinh"
                           name="tinh"

                           required
                           style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;"
                    >
                </div>
                <div style="margin-bottom: 10px;">
                    <label style="margin-bottom:5px;">Qu·∫≠n/Huy·ªán</label>

                    <input
                            th:value="${address != null && address.size() > 1 ? address[1] : 'Qu·∫≠n Huy·ªán'}"

                            id="quan"
                            name="quan"
                            required
                            style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;"
                    >
                </div>
                <div style="margin-bottom: 10px;">
                    <label style="margin-bottom:5px;">Ph∆∞·ªùng/X√£</label>

                    <input
                            id="phuong"
                            name="phuong"
                            th:value="${address != null && address.size() > 2 ? address[2] : 'Ph∆∞·ªùng X√£'}"
                            required
                            style="width: 100%; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px;"
                    >
                </div>

                <!--                &lt;!&ndash; Qu·∫≠n Huy·ªán &ndash;&gt;-->
                <!--                <select class="address-select" id="quan" name="quan" title="Ch·ªçn Qu·∫≠n Huy·ªán">-->
                <!--                    <option value="0" th:text="${address != null && address.size() > 1 ? address[1] : 'Qu·∫≠n Huy·ªán'}">-->
                <!--                        Qu·∫≠n Huy·ªán-->
                <!--                    </option>-->
                <!--                </select>-->

                <!--                &lt;!&ndash; Ph∆∞·ªùng X√£ &ndash;&gt;-->
                <!--                <select class="address-select" id="phuong" name="phuong" title="Ch·ªçn Ph∆∞·ªùng X√£">-->
                <!--                    <option value="0" th:text="${address != null && address.size() > 2 ? address[2] : 'Ph∆∞·ªùng X√£'}">-->
                <!--                        Ph∆∞·ªùng X√£-->
                <!--                    </option>-->
                <!--                </select>-->
            </div>

            <div class="form-group">
                <!-- ƒê·ªãa Ch·ªâ Chi Ti·∫øt -->
                <label for="detailed_address" class="form-label">ƒê·ªãa Ch·ªâ Chi Ti·∫øt</label>
                <textarea class="form-control" id="detailed_address" name="detailed_address" rows="3"
                          th:text="${address != null && address.size() > 3 ? address[3] : ''}"
                          placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ c·ª• th·ªÉ (v√≠ d·ª•: s·ªë nh√†, t√™n ƒë∆∞·ªùng)"></textarea>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-update btn-primary w-100">C·∫≠p Nh·∫≠t Th√¥ng Tin</button>
            </div>
        </form>
    </div>
</div>


<!-- Link Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>